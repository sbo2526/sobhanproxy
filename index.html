<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุณุจุญุงู ูพุฑูฺฉุณ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <style>
    body { background-color: #f5f5f5; padding-top: 80px; }
    .card { border-radius: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.2s ease; }
    .card:hover { transform: translateY(-3px); }
    .navbar { box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .proxy-box { padding: 20px; }
    .dropdown-menu {
      width: auto !important; min-width: auto !important;
      max-width: 90vw; white-space: nowrap;
      overflow-x: hidden; text-align: right;
      font-size: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border-radius: 0.5rem;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
  <div class="container d-flex justify-content-between align-items-center">
    <a class="navbar-brand fw-bold" href="#">ุณุจุญุงู ูพุฑูฺฉุณ</a>
    <div class="dropdown">
      <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        ููู
      </button>
      <ul class="dropdown-menu dropdown-menu-end text-end">
  <li><a class="dropdown-item" href="#" onclick="showMain()">๐ ุตูุญู ุงุตู</a></li>
  <li><a class="dropdown-item" href="#" onclick="showAbout()">โน๏ธ ุฏุฑุจุงุฑู ูุง</a></li>
  <li><a class="dropdown-item" href="#" onclick="showContact()">๐ฌ ุงุฑุชุจุงุท ุจุง ูุง</a></li>
  <li>
    <a class="dropdown-item" href="https://play.google.com/store/apps/details?id=com.sobhan.proxy" target="_blank">
      ๐ค ุฏุงูููุฏ ูุณุฎู ุงูุฏุฑูุฏ
    </a>
  </li>
  <li><a class="dropdown-item" href="tg://resolve?domain=sobhanproxy">๐ข ฺฉุงูุงู ุชูฺฏุฑุงู</a></li>
</ul>
    </div>
  </div>
</nav>
<style>
.rtl-content {
  direction: rtl !important;
  text-align: right !important;
}
</style>

<div id="aboutSection" class="container rtl-content" style="display: none;">
  <div class="py-4">
    <h3 class="fw-bold mb-4">๐ ุฏุฑุจุงุฑู ูุง</h3>

    <p class="fs-6">
      ุจุฑูุงูู ยซ<strong>ุณุจุญุงู ูพุฑูฺฉุณ</strong>ยป ุจุง ูุฏู ุณุงุฏูโุณุงุฒ ุฏุณุชุฑุณ ุจู ุงูุชุฑูุช ุขุฒุงุฏ ู ุชุฌุฑุจูโุง ุจูุชุฑ ุงุฒ ุงุณุชูุงุฏู ุงุฒ ูพุงูโุฑุณุงู ุชูฺฏุฑุงูุ ุจู ุตูุฑุช ฺฉุงููุงู ุฑุงฺฏุงู ู ุจุง ุนุดู ู ุชูุงุด ูุฑุฏ ุทุฑุงุญ ู ุชูุณุนู ุฏุงุฏู ุดุฏู ุงุณุช.
    </p>

    <p class="fs-6 mt-3">
      ุงู ุงูพูฺฉุดู ุชูุณุท ฺฉ ุจุฑูุงููโููุณ ูุณุชูู ู ุจุฏูู ุญูุงุช ูุงู ุงุฒ ูฺ ุณุงุฒูุงู ุง ููุงุฏ ุฎุงุต ุณุงุฎุชู ุดุฏู ุงุณุช.
    </p>

    <h5 class="fw-semibold mt-4 mb-3">โ ูฺฺฏโูุง ฺฉูุฏ:</h5>
    <ul class="fs-6">
      <li>ุฏุฑุงูุช ูพุฑูฺฉุณโูุง ุจูโุฑูุฒ ุงุฒ ููุงุจุน ูุฎุชูู</li>
      <li>ุชุณุช ู ููุงุด ูพูฺฏ ูุงูุน ูุฑ ูพุฑูฺฉุณ</li>
      <li>ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ ุณุฑุนุช ู ฺฉูุช ุงุชุตุงู</li>
      <li>ุงุชุตุงู ุขุณุงู ุจู ุชูฺฏุฑุงู ููุท ุจุง ฺฉ ฺฉูฺฉ</li>
      <li>ุทุฑุงุญ ูุฏุฑูุ ุณุจฺฉ ู ุจูููโุดุฏู ุจุฑุง ฺฏูุดโูุง ุงูุฏุฑูุฏ</li>
    </ul>

    <h5 class="fw-semibold mt-4 mb-2">๐ค ุญูุงุช ุงุฒ ุชูุณุนูโุฏููุฏู:</h5>
    <p class="fs-6">
      ุงฺฏุฑ ุงู ุจุฑูุงูู ุจุฑุง ุดูุง ููุฏ ุจูุฏูุ ูโุชูุงูุฏ ุงุฒ ูุง ุญูุงุช ฺฉูุฏ:
      <br>
      โข ูุนุฑู ุจุฑูุงูู ุจู ุฏูุณุชุงู<br>
      โข ุงุฑุงุฆู ุจุงุฒุฎูุฑุฏ ู ูพุดููุงุฏ<br>
      โข ุญูุงุช ูุงู ุฏุฑ ุขูุฏู (ุฏุฑ ุตูุฑุช ุงูุฒูุฏู ูุงุจูุช)
    </p>

    <p class="fs-6 mt-4">
      ๐ฌ ุชูุงุณ ุจุง ูุง: ุงุฒ ุทุฑู ุจุฎุด ยซุงุฑุชุจุงุท ุจุง ูุงยป ุฏุฑ ุจุฑูุงูู.
    </p>

    <p class="fs-6 fw-medium mt-5">
      ุจุง ุงุญุชุฑุงูุ<br>
      ุชูุณุนูโุฏููุฏูโ ูุณุชูู ุจุฑูุงูู ูพุฑูฺฉุณ ุชูฺฏุฑุงู ๐
    </p>
  </div>
</div>

<div id="contactSection" class="container rtl-content" style="display: none;">
  <div class="py-4">
    <h3 class="fw-bold mb-4">๐ฌ ุงุฑุชุจุงุท ุจุง ูุง</h3>

    <p class="fs-6">
      ุฎูุดุญุงู ูโุดูู ูุธุฑุงุชุ ูพุดููุงุฏุงุช ุง ูุดฺฉูุงุช ุฎูุฏ ุฑุง ุจุง ูุง ุฏุฑ ูุงู ุจฺฏุฐุงุฑุฏ. ูพุงุณุฎโฺฏู ูุง ูุนูููุงู ุฏุฑ ฺฉูุชุฑ ุงุฒ ฒด ุณุงุนุช ุงูุฌุงู ูโุดูุฏ.
    </p>

    <h5 class="fw-semibold mt-4 mb-3">๐ฑ ุฑูุดโูุง ุงุฑุชุจุงุท:</h5>
    <ul class="fs-6">
      <li>๐ฌ ุขุฏ ุชูฺฏุฑุงู: <strong>@sobhanproxy</strong></li>
      <li>๐ข ฺฉุงูุงู ุงุทูุงุนโุฑุณุงู: 
        <a href="https://t.me/sobhanproxy" class="text-decoration-none" target="_blank">@sobhanproxy</a>
      </li>
      <li>๐จ ุงุฑุณุงู ูพุงู ูุณุชูู: 
        <a href="tg://resolve?domain=sobhanproxy" class="btn btn-outline-success btn-sm ms-2">ุงุฑุณุงู ุฏุฑ ุชูฺฏุฑุงู</a>
      </li>
    </ul>

    <h5 class="fw-semibold mt-4 mb-2">โ ฺุฑุง ุจุง ูุง ุชูุงุณ ุจฺฏุฑุฏุ</h5>
    <p class="fs-6">
      โข ุจุฑุง ุงุฑุณุงู ูพุดููุงุฏ ุง ุงูุชูุงุฏ<br>
      โข ฺฏุฒุงุฑุด ุฎุทุงูุง ู ูุดฺฉูุงุช ุจุฑูุงูู<br>
      โข ุฏุฑุฎูุงุณุช ูุงุจูุช ุฌุฏุฏ ุง ููฺฉุงุฑ
    </p>

    <p class="fs-6 mt-4">
      ูุง ููุดู ฺฏูุดโุจูโุฒูฺฏ ูุณุชู ๐
    </p>

    <p class="fs-6 fw-medium mt-5">
      ุจุง ุณูพุงุณ ูุฑุงูุงูุ<br>
      ุชู ูพุดุชุจุงู ุณุจุญุงู ูพุฑูฺฉุณ
    </p>
  </div>
    <h3 class="fw-bold mb-4">๐ฌ ุงุฑุชุจุงุท ุจุง ูุง</h3>

    <p style="font-size: 16px;">
      ุฎูุดุญุงู ูโุดูู ูุธุฑุงุชุ ูพุดููุงุฏุงุช ุง ูุดฺฉูุงุช ุฎูุฏ ุฑุง ุจุง ูุง ุฏุฑ ูุงู ุจฺฏุฐุงุฑุฏ. ูพุงุณุฎโฺฏู ูุง ูุนูููุงู ุฏุฑ ฺฉูุชุฑ ุงุฒ ฒด ุณุงุนุช ุงูุฌุงู ูโุดูุฏ.
    </p>

    <h5 class="fw-semibold mb-3">๐ฑ ุฑูุดโูุง ุงุฑุชุจุงุท:</h5>
    <ul style="font-size: 16px;">
      <li>๐ฌ ุขุฏ ุชูฺฏุฑุงู: <strong>@sobhanproxy</strong></li>
      <li>๐ข ฺฉุงูุงู ุงุทูุงุนโุฑุณุงู: 
        <a href="https://t.me/sobhanproxy" class="text-decoration-none" target="_blank">@sobhanproxy</a>
      </li>
      <li>๐จ ุงุฑุณุงู ูพุงู ูุณุชูู: 
        <a href="tg://resolve?domain=sobhanproxy" class="btn btn-outline-success btn-sm ms-2">ุงุฑุณุงู ุฏุฑ ุชูฺฏุฑุงู</a>
      </li>
    </ul>

    <h5 class="fw-semibold mt-4 mb-2">โ ฺุฑุง ุจุง ูุง ุชูุงุณ ุจฺฏุฑุฏุ</h5>
    <p style="font-size: 16px;">
      โข ุจุฑุง ุงุฑุณุงู ูพุดููุงุฏ ุง ุงูุชูุงุฏ<br>
      โข ฺฏุฒุงุฑุด ุฎุทุงูุง ู ูุดฺฉูุงุช ุจุฑูุงูู<br>
      โข ุฏุฑุฎูุงุณุช ูุงุจูุช ุฌุฏุฏ ุง ููฺฉุงุฑ
    </p>

    <p class="mt-4" style="font-size: 16px;">
      ูุง ููุดู ฺฏูุดโุจูโุฒูฺฏ ูุณุชู ๐
    </p>

    <p class="mt-5" style="font-size: 16px; font-weight: 500;">
      ุจุง ุณูพุงุณ ูุฑุงูุงูุ<br>
      ุชู ูพุดุชุจุงู ุณุจุญุงู ูพุฑูฺฉุณ
    </p>
  </div>
</div>



<!-- ูุญุชูุง ุงุตู -->
<div class="container" id="mainContent">
  <h2 class="text-center mb-4">๐ ูุณุช ูพุฑูฺฉุณโูุง ุชูฺฏุฑุงู</h2>
  <div class="mb-4 text-center">
    <input type="text" id="searchBox" class="form-control w-50 d-inline" placeholder="ุฌุณุชุฌู ุณุฑูุฑ ูุซูุงู: ฑ ุง 2">
  </div>
  <div id="proxy-list" class="row justify-content-center">
    <p class="text-center text-muted">
      <div class="spinner-border text-primary" role="status"><span class="visually-hidden">ุฏุฑ ุญุงู ุฏุฑุงูุช...</span></div>
    </p>
  </div>
</div>

<!-- Modal ุงุทูุงุนู -->
<div class="modal fade" id="welcomeModal" tabindex="-1" aria-labelledby="welcomeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" dir="rtl" style="text-align: right;">
      <div class="modal-header">
        <h5 class="modal-title" id="welcomeModalLabel">๐ ุงุทูุงุนู ููู</h5>
        <button type="button" class="btn-close ms-auto" data-bs-dismiss="modal" aria-label="ุจุณุชู"></button>
      </div>
      <div class="modal-body" style="font-family: 'Vazir', sans-serif; line-height: 1.8;">
        <p>ุงู ุจุฑูุงูู <strong>ฺฉุงููุงู ุฑุงฺฏุงู</strong> ุงุณุช ู ุชูุณุท ฺฉ ูุฑุฏ ูุณุชูู ุณุงุฎุชู ุดุฏู ู ููุดู ูุฒ ุฑุงฺฏุงู ุจุงู ุฎูุงูุฏ ูุงูุฏ.</p>
        <p>ุชููุง ุฎูุงูุด ูุง ุงู ุงุณุช ฺฉู ุจุฑุง ุญูุงุช ุงุฒ ูุงุ ุนุถู ฺฉุงูุงู ุชูฺฏุฑุงู ูุง ุดูุฏ ๐</p>
        <p class="text-center mt-4">
          <a href="https://t.me/sobhanproxy" target="_blank" class="btn btn-outline-primary">๐ข ุนุถูุช ุฏุฑ ฺฉุงูุงู</a>
        </p>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  window.addEventListener('load', () => {
    loadProxies();
    const modal = new bootstrap.Modal(document.getElementById('welcomeModal'));
    modal.show();
  });

  async function loadProxies() {
    const list = document.getElementById('proxy-list');
    try {
      const res = await fetch('https://raw.githubusercontent.com/sbo2526/dns-switcher/main/Proxy/proxies.json');
      const text = await res.text();

      if (text.startsWith('<!DOCTYPE html') || text.includes('<html')) {
        list.innerHTML = '<p class="text-danger text-center">โ ูุงู JSON ุจู ุฏุฑุณุช ุฏุฑุงูุช ูุดุฏ (ุดุงุฏ GitHub ูุญุฏูุฏ ฺฉุฑุฏู)</p>';
        return;
      }

      const data = JSON.parse(text);
      const sorted = data.sort((a, b) => (parseInt(a.ping || 999) - parseInt(b.ping || 999)));
      list.innerHTML = '';

      let index = 0;
      sorted.forEach((proxy) => {
        if (!proxy.server || !proxy.port || !proxy.secret) return;

        const server = String(proxy.server).trim();
        const port = String(proxy.port).trim();
        const secret = String(proxy.secret).trim().toLowerCase();

        if (!/^ee[a-f0-9]{64,}$/i.test(secret)) return;

        const finalUrl = `tg://proxy?server=${server}&port=${port}&secret=${secret}`;
        index++;

        const card = document.createElement('div');
        card.className = 'col-md-4 col-sm-6 mb-4';
        card.innerHTML = `
  <div class="card h-100" data-index="${index}">
    <div class="card-body d-flex flex-column justify-content-between">
      <div class="proxy-box">
        <h5 class="mb-3 text-primary">ุณุฑูุฑ ุดูุงุฑู ${index}</h5>
        <p class="mb-2">โฑ๏ธ ูพูฺฏ: ${proxy.ping || 'ูุงูุดุฎุต'}ms</p>
        <p class="mb-3 text-muted">๐ MTProto</p>
      </div>
      <a href="${finalUrl}" class="btn btn-outline-primary mt-auto w-100" target="_blank">
        ุงุชุตุงู ุจู ุชูฺฏุฑุงู
      </a>
    </div>
  </div>
`;

        list.appendChild(card);
      });

      if (index === 0) {
        list.innerHTML = '<p class="text-warning text-center">โ๏ธ ูฺ ูพุฑูฺฉุณ MTProto ูุนุชุจุฑ ุงูุช ูุดุฏ.</p>';
      }
    } catch (err) {
      list.innerHTML = '<p class="text-danger text-center">โ ุฎุทุง ุฏุฑ ุฏุฑุงูุช ูุณุช ูพุฑูฺฉุณโูุง</p>';
    }
  }

  function hideAllSections() {
    document.getElementById('proxy-list').style.display = 'none';
    document.getElementById('aboutSection').style.display = 'none';
    document.getElementById('contactSection').style.display = 'none';
    document.getElementById('mainContent').style.display = 'none';
  }

  function showMain() {
    hideAllSections();
    document.getElementById('proxy-list').style.display = 'flex';
    document.getElementById('mainContent').style.display = 'block';
  }

  function showAbout() {
    hideAllSections();
    document.getElementById('aboutSection').style.display = 'block';
  }

  function showContact() {
    hideAllSections();
    document.getElementById('contactSection').style.display = 'block';
  }

  function rateApp() {
    const fallbackUrl = "https://play.google.com/store/apps/details?id=com.sobhan.proxy";
    window.location.href = "market://details?id=com.sobhan.proxy";
    setTimeout(() => {
      window.location.href = fallbackUrl;
    }, 1000);
  }

  document.getElementById('searchBox').addEventListener('input', function () {
    const searchTerm = this.value.trim().toLowerCase().replace('ุณุฑูุฑ', '').trim();
    const cards = document.querySelectorAll('#proxy-list .card');

    cards.forEach(card => {
      const index = card.getAttribute('data-index');
      if (searchTerm === '' || index === searchTerm) {
        card.parentElement.style.display = '';
      } else {
        card.parentElement.style.display = 'none';
      }
    });
  });

  document.addEventListener('click', function (e) {
    const btn = e.target.closest('.connect-btn');
    if (!btn) return;

    const url = btn.dataset.url;
    if (!url.startsWith('tg://proxy?')) {
      alert("โ ููฺฉ ูพุฑูฺฉุณ ูุงูุนุชุจุฑ ุงุณุช.");
      return;
    }

    btn.innerText = "ุฏุฑ ุญุงู ุงุชุตุงู...";
    btn.disabled = true;

    setTimeout(() => {
      window.location.href = url;
    }, 300);
  });
</script>

</body>
</html>
